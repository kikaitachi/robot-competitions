<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Robot competitions</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="List of future, ongoing and past robot competitions.">
<link rel="shortcut icon" type="image/png" href="logo.png">
<style>
body {
	color: #444;
	background: #F0F0F0;
	text-align: center;
}

h1, h2 {
	margin: 0;
	padding: 0;
	font-variant: small-caps;
}

h1 {
	font-size: 220%;
}

h2 {
	font-size: 100%;
	font-style: italic;
	margin-bottom: 0.5rem;
}

a {
	color: #444;
}

table {
	margin: auto;
	border-collapse: collapse;
}

td {
	vertical-align: top;
	padding: 0.4rem;
}

table tr td:nth-child(1) {
	text-align: left;
}

table tr td:nth-child(2) {
	text-align: right;
	/*border-radius: 0 0 1rem 0;*/
}

td.title {
	font-weight: bold;
	/*border-radius: 1rem 0 0 0;*/
}

.year {
	font-size: 125%;
	font-weight: bold;
	border-bottom: 3px solid #444;
}

.even {
	background: /*rgba(50, 50, 50, 0.1)*/white;
}

.odd {
	background: /*rgba(150, 150, 150, 0.1)*/white;
}

.gap {
	line-height: 0.2rem;
}

.footer {
	font-size: 75%;
}
</style>
</head>
<body>
<h1>Robot competitions</h1>
<h2>List of future, ongoing and past robot competitions</h2>
<table id="list"></table>
<p class="footer">Suggest missing entry: <i>competitions @ kikaitachi . com</i></p>
<script>
const months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];

const formatDate = (date) => {
	const day = date.substring(8);
	const month = date.substring(5, 7) - 1;
	return new Number(day) + '<sup>' + (['01', '21', '31'].includes(day) ? 'st': ['02', '22'].includes(day) ? 'nd' : 'th') + '</sup> ' + months[month];
};

fetch('list.json')
	.then(response => response.json())
	.then(data => {
		const list = document.getElementById('list');
		var last_year = -1;
		for (var i = 0; i < data.length; i++) {
			const year = data[i].endDate.substring(0, 4);
			if (last_year !== year) {
				last_year = year;

				const yearLine = document.createElement('tr');
				yearLine.className = 'year';
				yearLine.innerHTML = '<td colspan="2">' + year + '</td>';
				list.appendChild(yearLine);
			}

			const line0 = document.createElement('tr');
			line0.className = 'gap';
			line0.innerHTML = '<td colspan="2">&nbsp;</td>';
			list.appendChild(line0);

			const className = i % 2 == 0 ? 'even' : 'odd';
			const line1 = document.createElement('tr');
			line1.className = className;
			line1.innerHTML = '<td colspan="2" class="title"><a href="' + data[i].url + '">' + data[i].name + '</a></td>';
			list.appendChild(line1);

			const line2 = document.createElement('tr');
			line2.className = className;
			line2.innerHTML = '<td>' + data[i].location + '</td><td>' + formatDate(data[i].endDate) + '</td>';
			list.appendChild(line2);			
		}
	});
</script>
</body>
</html>
